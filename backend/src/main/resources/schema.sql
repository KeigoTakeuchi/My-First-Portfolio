CREATE TABLE IF NOT EXISTS accounts (
	id INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
	name VARCHAR(255) UNIQUE NOT NULL,
	hashed_password VARCHAR(255) NOT NULL,
	display_name VARCHAR(50) UNIQUE NOT NULL,
	authority VARCHAR(20) NOT NULL CHECK (authority IN ('ADMIN','USER','UNKNOWN')),
	created_at TIMESTAMP NOT NULL,
	updated_at TIMESTAMP NOT NULL
);

CREATE TABLE IF NOT EXISTS messages (
	id INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
	account_id INTEGER NOT NULL,
	title VARCHAR(100) NOT NULL,
	content VARCHAR(500) NOT NULL,
	created_at TIMESTAMP NOT NULL,
	updated_at TIMESTAMP NOT NULL,
	FOREIGN KEY (account_id) REFERENCES accounts(id)
);

CREATE TABLE IF NOT EXISTS images (
	id INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
	name VARCHAR(100) NOT NULL,
	file_path VARCHAR(300) NOT NULL,
	message_id INTEGER NOT NULL,
	FOREIGN KEY (message_id) REFERENCES messages(id)
);